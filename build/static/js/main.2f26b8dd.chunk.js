(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{11:function(n,e,t){"use strict";t.d(e,"a",function(){return s}),t.d(e,"c",function(){return d}),t.d(e,"b",function(){return f}),t.d(e,"d",function(){return g});var r=t(4),a=t(10),o=t.n(a),c=t(12),i=t(9),u=t(15),s={LOGIN_REQUEST:"LOGIN_REQUEST",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILURE:"LOGIN_FAILURE",CLEAR_TOKEN:"CLEAR_TOKEN"},l=function(n){return fetch("".concat(i.a,"/login"),function(n){var e=n.email,t=n.password;return{method:"POST",body:JSON.stringify({email:e,password:t,expiry:"180s"}),headers:i.b}}(n))},d=function(n){return function(){var e=Object(c.a)(o.a.mark(function e(t){var r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:s.LOGIN_REQUEST,data:n}),e.prev=1,e.next=4,l(n);case 4:return r=e.sent,e.next=7,r.json();case 7:!(a=e.sent).accessToken||a.error?t({type:s.LOGIN_FAILURE,error:a.error}):t(p(a.accessToken)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t({type:s.LOGIN_FAILURE,error:e.t0});case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(n){return e.apply(this,arguments)}}()},p=function(n){return function(){var e=Object(c.a)(o.a.mark(function e(t){var a,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(i.a,"/"),{method:"GET",headers:Object(r.a)({},i.b,{Authorization:n})});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,t({type:s.LOGIN_SUCCESS,token:n,tokenExpiry:c.token.exp}),localStorage.setItem("token",n),localStorage.setItem("tokenExpiry",c.token.exp),u.a.push("/apps"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t({type:s.LOGIN_FAILURE,error:e.t0});case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(n){return e.apply(this,arguments)}}()},f=function(n){u.a.push("/"),localStorage.removeItem("token"),localStorage.removeItem("tokenExpiry"),n({type:s.CLEAR_TOKEN})},g=function(){return function(n){f(n)}}},15:function(n,e,t){"use strict";t.d(e,"a",function(){return a});var r=t(45),a=t.n(r)()()},17:function(n,e,t){"use strict";t.d(e,"a",function(){return d});var r=t(5),a=t(0),o=t.n(a),c=t(6),i=t(48),u=t.n(i);function s(){var n=Object(r.a)(["\n    margin: 0 auto;\n"]);return s=function(){return n},n}var l=c.b.img(s()),d=function(){return o.a.createElement(l,{src:u.a,alt:"Loading"})}},19:function(n,e,t){"use strict";t.d(e,"a",function(){return u}),t.d(e,"b",function(){return l});var r=t(10),a=t.n(r),o=t(12),c=t(4),i=t(9),u={APP_LOAD_REQUEST:"APP_LOAD_REQUEST",APP_LOAD_SUCCESS:"APP_LOAD_SUCCESS",APP_LOAD_FAILURE:"APP_LOAD_FAILURE"},s=function(){return fetch("".concat(i.a,"/apps"),{method:"GET",headers:Object(c.a)({},i.b,{Authorization:localStorage.getItem("token")})})};function l(n){return function(){var n=Object(o.a)(a.a.mark(function n(e){var t,r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:u.APP_LOAD_REQUEST}),n.prev=1,n.next=4,s();case 4:return t=n.sent,n.next=7,t.json();case 7:r=n.sent,e({data:r.apps,type:u.APP_LOAD_SUCCESS}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),e({error:n.t0,type:u.APP_LOAD_FAILURE});case 14:case"end":return n.stop()}},n,this,[[1,11]])}));return function(e){return n.apply(this,arguments)}}()}},20:function(n,e,t){"use strict";t.d(e,"a",function(){return u}),t.d(e,"b",function(){return l});var r=t(10),a=t.n(r),o=t(12),c=t(4),i=t(9),u={USERS_LOAD_REQUEST:"USERS_LOAD_REQUEST",USERS_LOAD_SUCCESS:"USERS_LOAD_SUCCESS",USERS_LOAD_FAILURE:"USERS_LOAD_FAILURE"},s=function(n,e){var t=void 0===e?"".concat(i.a,"/apps/").concat(n,"/users"):"".concat(i.a,"/apps/").concat(n,"/users").concat(e);return fetch(t,{method:"GET",headers:Object(c.a)({},i.b,{Authorization:localStorage.getItem("token")})})};function l(n,e){return function(){var t=Object(o.a)(a.a.mark(function t(r){var o,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.USERS_LOAD_REQUEST}),t.prev=1,t.next=4,s(n,e);case 4:return o=t.sent,t.next=7,o.json();case 7:c=t.sent,r({data:c.users,type:u.USERS_LOAD_SUCCESS}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),r({error:t.t0,type:u.USERS_LOAD_FAILURE});case 14:case"end":return t.stop()}},t,this,[[1,11]])}));return function(n){return t.apply(this,arguments)}}()}},34:function(n,e,t){"use strict";e.a={getLogin:function(n){return function(n){return n||{}}(n).login||{}}}},37:function(n,e,t){"use strict";t.d(e,"c",function(){return l}),t.d(e,"e",function(){return d}),t.d(e,"d",function(){return p}),t.d(e,"b",function(){return f}),t.d(e,"a",function(){return g});var r=t(5),a=t(6);function o(){var n=Object(r.a)(["\n    background-color: #FFF;\n    border-radius: 3px; \n    display: grid;\n    padding: 1rem;\n    text-align: center;\n    max-width: 100%;\n    margin: 1rem 0;\n    @media (min-width: 768px) {\n        margin: 1rem;\n    }\n"]);return o=function(){return n},n}function c(){var n=Object(r.a)(["\n    display: grid;\n    grid-template-columns: 100%;\n\n    @media (min-width: 768px) {\n        grid-template-columns: 50% 50%;\n    }\n    @media (min-width: 1024px) {\n        grid-template-columns: 33% 33% 33%;\n    }\n"]);return c=function(){return n},n}function i(){var n=Object(r.a)(["\n    margin: 0 auto;\n    width: 100%;\n"]);return i=function(){return n},n}function u(){var n=Object(r.a)(["\n    text-align:center;\n    color: #FFF;\n    margin-bottom: 1rem;\n    text-transform: uppercase;\n"]);return u=function(){return n},n}function s(){var n=Object(r.a)(["\n\n    * {\n        box-sizing: border-box;\n    }\n\n    body {\n        background: #14233c;\n        margin: 0;\n        padding: 0;\n        font-family: Helvetica Neue,Helvetica,Arial,sans-serif; \n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n\n        h1, h2 {\n            margin: 0 auto 1rem auto;\n            color: #14233c;\n            text-align: center;\n            text-transform: uppercase;\n        }\n\n        h2 {\n            margin: 1rem 0 0;\n        }\n\n        .wrapper {\n            margin: 0 auto;\n            max-width: 1100px;\n        }\n\n        .main {\n            padding: 2rem;\n            text-align: center;\n        }\n    }"]);return s=function(){return n},n}var l=Object(a.a)(s()),d=a.b.h1(u()),p=a.b.img(i()),f=a.b.div(c()),g=a.b.div(o())},48:function(n,e,t){n.exports=t.p+"static/media/loading.a516b9f8.svg"},53:function(n,e,t){n.exports=t(68)},68:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(18),c=t.n(o),i=t(8),u=t(16),s=t(43),l=t(29),d=t(44),p=t(49),f=t(4),g=t(19),m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.a.APP_LOAD_REQUEST:return Object(f.a)({},n,{loading:!0});case g.a.APP_LOAD_SUCCESS:return{items:e.data,loading:!1};case g.a.APP_LOAD_FAILURE:return{error:e.error};default:return n}},E=t(20),h=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E.a.USERS_LOAD_REQUEST:return Object(f.a)({},n,{loading:!0});case E.a.USERS_LOAD_SUCCESS:return{items:e.data,loading:!1};case E.a.USERS_LOAD_FAILURE:return{error:e.error};default:return n}},b=t(11),v={token:null,tokenExpiry:null},S=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{payload:v},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b.a.LOGIN_REQUEST:return Object(f.a)({},n,{loading:!0});case b.a.LOGIN_SUCCESS:return Object(f.a)({},n,{payload:{token:e.token,tokenExpiry:e.tokenExpiry},loading:!1});case b.a.LOGIN_FAILURE:return Object(f.a)({},n,{error:e.error,loading:!1});case b.a.CLEAR_TOKEN:return{payload:v};default:return n}},O=Object(i.c)({apps:m,users:h,login:S}),_=t(31),L=t(32),A=t(35),w=t(33),y=t(36),U=t(86),x=t(85),k=t(87),j=t(23),R=t.n(j),I=t(15),C=t(50),P=t(84),D=function(n){var e=n.component,t=Object(C.a)(n,["component"]);return a.a.createElement(k.a,Object.assign({},t,{render:function(n){return localStorage.getItem("token")?a.a.createElement(e,n):a.a.createElement(P.a,{to:{pathname:"/",state:{from:n.location}}})}}))},T=t(34),F=t(5),N=t(81),G=t(6);function Q(){var n=Object(F.a)(["\n    color: #FFF;\n    transition: .2s linear;\n    &:hover {\n        color: #00a0d6;\n    }\n    &:first-child {\n        margin-right: 1rem;\n    }\n"]);return Q=function(){return n},n}function W(){var n=Object(F.a)(["\n    display: flex;\n    align-items: center;\n"]);return W=function(){return n},n}function z(){var n=Object(F.a)(["\n    padding: 2rem;\n    text-align: right;\n    display: flex;\n    justify-content: space-between;\n    @media (min-width: 768px) {\n        margin: 0 1rem;\n    }\n"]);return z=function(){return n},n}function H(){var n=Object(F.a)(["\n    height: 40px;\n    padding: 0 1rem;\n    font-size: .8rem;\n    text-transform: uppercase;\n    color: #FFF;\n    border-radius: 3px;\n    background-color: #005E85;\n    border: 0;\n    cursor: pointer;\n    transition: .2s linear;\n    &:hover {\n        background-color: #008dbd;\n    }\n"]);return H=function(){return n},n}var K=G.b.button(H()),J=G.b.header(z()),B=G.b.div(W()),M=Object(G.b)(N.a)(Q()),X=function(n){var e=n.logout;return a.a.createElement(J,null,a.a.createElement(B,null,a.a.createElement(M,{to:"/"},"Home"),a.a.createElement(M,{to:"/apps"},"Apps")),a.a.createElement(K,{onClick:e},"Logout"))},V=t(17),$=t(37),q=R()({loader:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,83))},loading:V.a}),Y=R()({loader:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,82))},loading:V.a}),Z=R()({loader:function(){return t.e(4).then(t.bind(null,88))},loading:V.a}),nn=function(n){function e(){var n,t;Object(_.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(A.a)(this,(n=Object(w.a)(e)).call.apply(n,[this].concat(a)))).handleLogout=function(){t.props.logout()},t}return Object(y.a)(e,n),Object(L.a)(e,[{key:"render",value:function(){var n=!(!this.props.getLogin.payload||null===this.props.getLogin.payload.token);return a.a.createElement("div",{className:"wrapper"},a.a.createElement($.c,null),a.a.createElement(U.a,{history:I.a},a.a.createElement("div",null,n&&a.a.createElement(X,{logout:this.handleLogout}),a.a.createElement("div",{className:"main"},a.a.createElement(x.a,null,a.a.createElement(D,{exact:!0,path:"/apps",component:q}),a.a.createElement(D,{path:"/apps/:appId",component:Z}),a.a.createElement(k.a,{path:"/",component:Y}))))))}}]),e}(r.Component),en=Object(u.b)(function(n){return{getLogin:T.a.getLogin(n)}},function(n){return{logout:function(){return n(Object(b.d)())}}})(nn),tn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rn(n,e){navigator.serviceWorker.register(n).then(function(n){n.onupdatefound=function(){var t=n.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))}}}).catch(function(n){console.error("Error during service worker registration:",n)})}t.d(e,"store",function(){return un}),t.d(e,"persistor",function(){return sn});var an=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,on={key:"root",storage:p.a},cn=Object(l.a)(on,O),un=Object(i.e)(cn,an(Object(i.a)(function(n){return function(e){return function(t){var r=localStorage.getItem("tokenExpiry");parseInt(r)<Math.floor(Date.now()/1e3)&&(localStorage.clear(),n.dispatch(b.b),e(t)),e(t)}}},s.a))),sn=Object(l.b)(un);c.a.render(a.a.createElement(u.a,{store:un},a.a.createElement(d.a,{persistor:sn},a.a.createElement(en,null))),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");tn?(function(n,e){fetch(n).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(n){n.unregister().then(function(){window.location.reload()})}):rn(n,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,n),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):rn(e,n)})}}()},9:function(n,e,t){"use strict";t.d(e,"a",function(){return r}),t.d(e,"b",function(){return a});var r="https://guarded-thicket-22918.herokuapp.com",a={"Content-Type":"application/json",Accept:"application/json",Host:r}}},[[53,6,5]]]);
//# sourceMappingURL=main.2f26b8dd.chunk.js.map